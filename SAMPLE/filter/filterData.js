var sessions=[
  {
    "active": 1,
    "maxPrezente": 20,
    "organizatorName": "cosmin stefan",
    "organizatorUID": "dCJ8S4gZk1b9zffvWOHB03qWkKr2",
    "prezente": 20,
    "sessionCode": "carapace",
    "titlu": "test2",
    "key": "-LX2vwvnUyl133pJTmmc"
  },
  {
    "active": 1,
    "maxPrezente": 30,
    "organizatorName": "Gavrilut",
    "organizatorUID": "uid_gavrilut",
    "prezente": 0,
    "sessionCode": "poo",
    "titlu": "POO",
    "key": "-LX2w77zeX1PrlOPjrRk"
  },
  {
    "active": 1,
    "maxPrezente": 30,
    "organizatorName": "cosmin stefan",
    "organizatorUID": "dCJ8S4gZk1b9zffvWOHB03qWkKr2",
    "prezente": 0,
    "sessionCode": "test7",
    "titlu": "Test7",
    "key": "-LX2wY7G6u90qJP0OjJD"
  },
  {
    "active": 0,
    "maxPrezente": 30,
    "organizatorName": "cosmin stefan",
    "organizatorUID": "dCJ8S4gZk1b9zffvWOHB03qWkKr2",
    "prezente": 0,
    "sessionCode": "test8",
    "titlu": "Test8",
    "key": "-LX2wY7K0eeH8TU-Bl5T"
  },
  {
    "active": 1,
    "maxPrezente": 30,
    "organizatorName": "cosmin stefan",
    "organizatorUID": "dCJ8S4gZk1b9zffvWOHB03qWkKr2",
    "participants": [
      {
        "feedback": "smecher",
        "grade": "12",
        "id": "yARRnkFD9KQpeakT4Jth1Vimmur2",
        "name": "cristian stefan"
      }
    ],
    "prezente": 1,
    "sessionCode": "test9",
    "titlu": "Test9",
    "key": "-LX2wY7Oib10hCMsb806"
  },
  {
    "active": 1,
    "maxPrezente": 30,
    "organizatorName": "cosmin stefan",
    "organizatorUID": "dCJ8S4gZk1b9zffvWOHB03qWkKr2",
    "prezente": 0,
    "sessionCode": "test10",
    "titlu": "Test10",
    "key": "-LX2wepkl-NEVwY_Cs8N"
  },
  {
    "active": 1,
    "maxPrezente": 30,
    "organizatorName": "cosmin stefan",
    "organizatorUID": "dCJ8S4gZk1b9zffvWOHB03qWkKr2",
    "prezente": 0,
    "sessionCode": "test11",
    "titlu": "Test11",
    "key": "-LX2wepouY2rSglGHcXA"
  },
  {
    "active": 1,
    "maxPrezente": "5",
    "organizatorName": "cosmin stefan",
    "organizatorUID": "dCJ8S4gZk1b9zffvWOHB03qWkKr2",
    "participants": [
      {
        "feedback": "200",
        "grade": "11",
        "id": "yARRnkFD9KQpeakT4Jth1Vimmur2",
        "name": "cristian stefan"
      }
    ],
    "prezente": 1,
    "sessionCode": "ioana",
    "titlu": "ioana",
    "key": "-LXGER5aLViZL1xfd9l-"
  },
  {
    "active": 1,
    "maxPrezente": "5",
    "organizatorName": "cosmin stefan",
    "organizatorUID": "dCJ8S4gZk1b9zffvWOHB03qWkKr2",
    "participants": [
      {
        "feedback": "200",
        "grade": "11",
        "id": "yARRnkFD9KQpeakT4Jth1Vimmur2",
        "name": "cristian stefan"
      }
    ],
    "prezente": 1,
    "sessionCode": "ioana",
    "titlu": "ioana",
    "key": "-LXGESAlhgkfjCC-G7ct"
  },
  {
    "active": 1,
    "maxPrezente": "2",
    "organizatorName": "cosmin stefan",
    "organizatorUID": "dCJ8S4gZk1b9zffvWOHB03qWkKr2",
    "participants": [
      {
        "feedback": "200",
        "grade": "11",
        "id": "yARRnkFD9KQpeakT4Jth1Vimmur2",
        "name": "cristian stefan"
      }
    ],
    "prezente": 1,
    "sessionCode": "aa",
    "titlu": "aa",
    "key": "-LXGEqi_9kbPldD9Mf9B"
  },
  {
    "active": 1,
    "maxPrezente": "4",
    "organizatorName": "cosmin stefan",
    "organizatorUID": "dCJ8S4gZk1b9zffvWOHB03qWkKr2",
    "participants": [
      {
        "feedback": "200",
        "grade": "11",
        "id": "yARRnkFD9KQpeakT4Jth1Vimmur2",
        "name": "cristian stefan"
      }
    ],
    "prezente": 1,
    "sessionCode": "aa",
    "titlu": "aa",
    "key": "-LXGFB11O8AUMfYVWx4d"
  },
  {
    "active": 1,
    "maxPrezente": "5",
    "organizatorName": "cosmin stefan",
    "organizatorUID": "dCJ8S4gZk1b9zffvWOHB03qWkKr2",
    "participants": [
      {
        "feedback": "zzc",
        "grade": "10",
        "id": "yARRnkFD9KQpeakT4Jth1Vimmur2",
        "name": "cristian stefan"
      }
    ],
    "prezente": 1,
    "sessionCode": "aa",
    "titlu": "aa",
    "key": "-LXGFiDvN9I8BLIrFtKO"
  },
  {
    "active": 1,
    "maxPrezente": "20",
    "organizatorName": "cosmin stefan",
    "organizatorUID": "dCJ8S4gZk1b9zffvWOHB03qWkKr2",
    "participants": [
      {
        "feedback": "zzc",
        "grade": "10",
        "id": "yARRnkFD9KQpeakT4Jth1Vimmur2",
        "name": "cristian stefan"
      }
    ],
    "prezente": 1,
    "sessionCode": "lab3",
    "titlu": "lab 3",
    "key": "-LXGTzU68ZaBj3YdOKlX"
  },
  {
    "active": 1,
    "maxPrezente": "10",
    "organizatorName": "cosmin stefan",
    "organizatorUID": "dCJ8S4gZk1b9zffvWOHB03qWkKr2",
    "participants": [
      {
        "feedback": "smec",
        "grade": "12",
        "id": "yARRnkFD9KQpeakT4Jth1Vimmur2",
        "name": "cristian stefan"
      }
    ],
    "prezente": 1,
    "sessionCode": "lab4",
    "titlu": "lab4",
    "key": "-LXGgTZP9qxQIDwZQWII"
  },
  {
    "active": 1,
    "maxPrezente": "5",
    "organizatorName": "cosmin stefan",
    "organizatorUID": "dCJ8S4gZk1b9zffvWOHB03qWkKr2",
    "participants": [
      {
        "feedback": "sme",
        "grade": "12",
        "id": "yARRnkFD9KQpeakT4Jth1Vimmur2",
        "name": "cristian stefan"
      }
    ],
    "prezente": 1,
    "sessionCode": "5",
    "titlu": "lab5",
    "key": "-LXGghE3lfNjS3ekNi5K"
  },
  {
    "active": 1,
    "maxPrezente": "6",
    "organizatorName": "cosmin stefan",
    "organizatorUID": "dCJ8S4gZk1b9zffvWOHB03qWkKr2",
    "participants": [
      {
        "feedback": "smec",
        "grade": "12",
        "id": "yARRnkFD9KQpeakT4Jth1Vimmur2",
        "name": "cristian stefan"
      }
    ],
    "prezente": 1,
    "sessionCode": "6",
    "titlu": "lab6",
    "key": "-LXGgmI-gnk_ZrcCd5oW"
  },
  {
    "active": 1,
    "maxPrezente": "8",
    "organizatorName": "cosmin stefan",
    "organizatorUID": "dCJ8S4gZk1b9zffvWOHB03qWkKr2",
    "participants": [
      {
        "feedback": "smemmm",
        "grade": "12",
        "id": "yARRnkFD9KQpeakT4Jth1Vimmur2",
        "name": "cristian stefan"
      }
    ],
    "prezente": 1,
    "sessionCode": "8",
    "titlu": "8",
    "key": "-LXGhoG3lbHId7jq_h_I"
  },
  {
    "active": 1,
    "maxPrezente": "20",
    "organizatorName": "cosmin stefan",
    "organizatorUID": "dCJ8S4gZk1b9zffvWOHB03qWkKr2",
    "participants": [
      {
        "feedback": "ia si mai invata",
        "grade": "8",
        "id": "yARRnkFD9KQpeakT4Jth1Vimmur2",
        "name": "cristian stefan"
      }
    ],
    "prezente": 1,
    "sessionCode": "david",
    "titlu": "lab lui david",
    "key": "-LXKYW3Sn6PJHnnba8zv"
  },
  {
    "active": 1,
    "maxPrezente": "10",
    "organizatorName": "cosmin stefan",
    "organizatorUID": "dCJ8S4gZk1b9zffvWOHB03qWkKr2",
    "prezente": 0,
    "sessionCode": "serban",
    "titlu": "serban",
    "key": "-LXQjCGFovwttXB4kd7Y"
  },
  {
    "active": 0,
    "maxPrezente": 20,
    "organizatorName": "cosmin stefan",
    "organizatorUID": "dCJ8S4gZk1b9zffvWOHB03qWkKr2",
    "prezente": 0,
    "sessionCode": "querty",
    "titlu": "mate",
    "key": "-LXolG9rpaDYxA7GttMi"
  },
  {
    "active": 1,
    "maxPrezente": "10",
    "organizatorName": "cosmin stefan",
    "organizatorUID": "dCJ8S4gZk1b9zffvWOHB03qWkKr2",
    "participants": [
      {
        "feedback": "Please wait for review",
        "grade": 0,
        "id": "yARRnkFD9KQpeakT4Jth1Vimmur2",
        "name": "cristian stefan",
        "time": 1549224882174
      }
    ],
    "prezente": 1,
    "sessionCode": "lab44",
    "titlu": "lab44",
    "key": "-LXoofujp3p4-towogoP"
  },
  {
    "active": 1,
    "maxPrezente": "",
    "organizatorName": "cosmin stefan",
    "organizatorUID": "dCJ8S4gZk1b9zffvWOHB03qWkKr2",
    "prezente": 0,
    "sessionCode": "5hjKje",
    "titlu": "",
    "key": "-LYE9YNhTIZwOM227B1l"
  }
];

function prepareFilters(iname,_id){
  console.log("da");
  var avSessions=[];
  var k=-1;
  id=document.getElementById(_id);
  for (var i=0;i<sessions.length;i++)
  {
    console.log(sessions[i].organizatorName);
    if(sessions[i].organizatorName==iname)
    {
      console.log("aici e cosmin");
      k++;
      avSessions[k]=sessions[i].titlu;
    }
  }
  if(k!=-1)
  {
    for(var j=0;j<=k;j++)
    { console.log("aici e o sessiune");
      addbtn=document.createElement("input");
	    addbtn.type="checkbox";
      addbtn.id=avSessions[j];
      addbtn.className="checkBox";
      paragraf=document.createElement("p")
      paragraf.innerHTML=avSessions[j];
      paragraf.style.width="auto";
      paragraf.style.display="inline-block";
      paragraf.style.marginLeft="20px";
      id.appendChild(paragraf);
      id.appendChild(addbtn);
    }
  }
}



function popUp(){
  prepareFilters("cosmin stefan","availableSessions");
  document.getElementById('createChart').style.display='block';
  
}
function closePopUp(){
  document.getElementById('createChart').style.display='none';
  
}


function getCheckedSessions(){
  var lista=[];
  var result=[];
  var k=-1;
  lista=document.getElementsByClassName("checkBox");
  
  for (var i=0;i<lista.length;i++)
  {
    if(lista[i].checked==true)
    {
      
      k++;
      result[k]=lista[i].id;
    }
  }
  
  return result;
}

function getMarkInterval(){
  var result=[];
  result[0]=document.getElementById("minGrade").value;
  result[1]=document.getElementById("maxGrade").value;
  if(result[0]==null||result[0]=="")
    result[0]=0;
  if(result[1]==null||result[1]=="")
    result[1]=20;

  return result;
}

function getTimeInterval(){
  var time=new Date().getTime();
  var result=[];

  result[0]=document.getElementById("startTime").value;
  result[1]=document.getElementById("endTime").value;

  if(result[0]==null||result[0]=="")
    result[0]=0;
  if(result[1]==null||result[1]=="")
    result[1]=time;
  
  return result;
}

function getPassed(){
result= document.getElementById("isPassed");
if(result.checked==true)
  return true;
  else
  return false;
}

async function doit()
{
	var sesiuniMarcate=await getCheckedSessions();
  var intervalNote=await getMarkInterval();
  var intervalTimp=await getTimeInterval();
  var trecut_picat=await getPassed();
  console.log("checkboxuri marcate: ");
  console.log(sesiuniMarcate.length);
  console.log("si anume:");
  console.log(sesiuniMarcate);

  console.log("interval note: ");
  console.log(intervalNote[0]);
  console.log(", ");
  console.log(intervalNote[1]);

  
  console.log("interval timp: ");
  console.log(intervalTimp[0]);
  console.log(", ");
  console.log(intervalTimp[1]);

  console.log("afiseaza doar studentii trecuti:");
  console.log(trecut_picat);    
}